同伦类型论核心的新观点是, 类型可以看作同伦论中的空间, 或者范畴论中的高维广群.

\index{经典的!同伦论|(}
\index{高阶范畴论|(}
从简要概括同伦论和高维范畴论之间的联系开始.
经典同伦论中, 空间 $X$ 是具备拓扑结构的点的集合,
\indexsee{空间!拓扑的}{拓扑空间}%
\index{拓扑的!空间}%
点 $x$ 和点 $y$ 之间的路径代表连续映射 $p : [0,1] \to X$, 其中 $p(0) = x$, $p(1) = y$.
\index{路径!拓扑的}%
\index{拓扑的!路径}%
这个函数可以被想象成, 每个``时刻''给定 $X$ 中一个点.
出于许多目的, 路径的严格等同 (即逐点相等的函数) 是太完美的概念.
例如, 可以定义路径串联运算 (若 $p$ 是一个 从 $x$ 到 $y$ 的路径, 而 $q$ 是 从 $y$ 到 $z$ 的路径, 那么串联 $p \ct q$ 是一个从 $x$ 到 $z$ 的路径) 和逆运算 ($\opp p$ 是一个从 $y$ 到 $x$ 的路径).
然而这些运算之间正常的等式不满足严格的相等性: 例如, 路径 $p \ct \opp p$ (随着时间从 $0$ 到 $1$, 从 $x$ 移动到 $y$, 然后沿着原路返回) 不严格等于恒等路径 (每时每刻都是 $x$).

作为补救措施, 考虑一个更松散的路径等同的概念, 叫做\emph{同伦}.
\index{同伦!拓扑的}
两个连续映射 $f : X_1 \to X_2$ 和 $g : X_1\to X_2$ 之间的同伦是一个连续映射, 写作 $H : X_1 \times [0, 1] \to X_2$, 满足 $H(x, 0) = f (x)$ 和 $H(x, 1) = g(x)$.
从 $x$ 到 $y$ 的路径 $p$ 和 $q$ 的特殊情况中, 同伦是一个连续映射 $H : [0,1] \times [0,1] \rightarrow X$, 其中, 对于所有 $s\in [0,1]$, 有 $H(s,0) = p(s)$ 和 $H(s,1) = q(s)$.
这个情况下, 还要求对于所有 $t\in [0,1]$ 有 $H(0,t) = x$ 和 $H(1,t)=y$, 因此对于每个 $t$, 函数 $H(\blank,t)$ 仍是是一个从 $x$ 到 $y$ 的函数;
这种同伦被称为\emph{端点保留}或者\emph{相对端点}.
在简单的情况下, $H$ 下的正方形 $[0,1]\times [0,1]$ 的图像可以被视为是 ``填充''  $p$ 和 $q$ 之间的 ``空间'', 尽管对于普通的 $X$ 实际上没有意义;
把 $H$ 视为从端点固定的 $p$ 到 $q$ 的连续变形更佳.
由于 $[0,1]\times [0,1]$ 是二维的, $H$ 也被称为\emph{路径之间的}二维\emph{路径}.\index{路径!2-}

例如, 由于 $p \ct \opp p$ 沿着同样的路径来回, 你也许会想连续缩小 $p \ct \opp p$ 到恒等路径 --- 这样是不行的, 例如, 可能会在空间的洞上卡住.
同伦是一个等价关系, 而且遵循串联, 逆运算这样的运算.
此外, 位于群上的某些点 $x_0$ 的环圈 (当环圈 $p$ 和 $q$ 之间有一个\emph{基础}同伦时, 它们相等, 即同伦 $H$, 它额外满足对于所有 $t$ 有 $H(0,t) = H(1,t) = x_0$), 其同伦等价形成了一个群, 被称为\emph{基本群}.
\index{基本!群}%
这个群是空间的\emph{代数不变量}, 可以用来研究两个空间是否\emph{同伦等价} (存在来和回的连续映射, 并与恒等同伦), 因为空间的等价与基本群同构.

因为同伦本身是一种二维路径, 自然存在三维路径\emph{同伦间的同论}的概念,
\index{路径!3-}%
然后是\emph{同伦间的同伦间的同伦}, 等等.
这种无限的层级, 点, 路径, 同伦, 同伦间的同伦, \ldots, 具备诸如基本群的代数运算, 是代数结构 (弱) \emph{$\infty$-广群}的的一个实例.
$\infty$-广群\index{无穷广群@$\infty$-广群}由对象, 对象间的\emph{态射}%
\indexdef{态射!在一个无穷广群@在一个 $\infty$-广群}, \emph{态射间的态射}, 等等组成, 它具有一些复杂的代数结构;
一个层级 $k$ 的态射被称为一个 \define{$k$-态射}\indexdef{k-态射@$k$-态射}.
弱的意思是, 每个层级的态射都有恒等, 复合, 和逆运算, 只有在提升到下一层级的态射时才满足广群定律 (复合的结合率, 恒等是复合的单位元, 逆取消), 弱特性产生了进一步的结构.
例如, 因为态射的复合的交换律 $p \ct (q \ct r) = (p \ct q) \ct r$ 本身就是高维态射, 所以额外需要和各种结合律的证明有关的运算: 各种再结合 $p \ct (q \ct (r \ct s))$ 到 $((p \ct q) \ct r) \ct s$ 的方法产生了麦克兰恩五边形\index{五边形, 麦克兰恩}.
这个弱的特征还产生了层级之间的非平凡相互作用.

每个拓扑空间 $X$ 有一个\emph{基本$\infty$-广群},
\index{.infinity-广群@$\infty$-广群!基本}%
\index{基本!.infinity-广群@$\infty$-广群}%
其 $k$-态射是 $X$ 中的 $k$-维路径.
$\infty$-广群 的弱的特性直接相当于群刚好提升到同伦的路径, 其中 $(k+1)$-维路径 充当 $k$-维路径之间的同伦.
此外, 空间作为 $\infty$-广群的观点, 充分保持了空间的特征来做同伦论: 基本的 $\infty$-广群构造伴随\index{伴随!函子} $\infty$-广群作为空间的几何\index{几何实现}实现, 这个伴随函子保持同伦论
(这被称为\emph{同伦猜想/定理}, \index{猜想!同伦}
\index{同伦!猜想}%
因为它是猜想还是定理取决于如何定义 $\infty$-广群).
例如, 你可以轻松定义 $\infty$-广群的基本群, 而且空间的 $\infty$-广群的基本群, 和经典的空间基本群的定义一致.
因为这个对应关系, 同伦论和高维范畴论关系紧密.

\index{经典的!同伦论|)}%
\index{高阶范畴论|)}%

\mentalpause

现在, 同伦类型论中每个类型可以视为具有 $\infty$-广群的结构.
回顾对于任何类型 $A$, 和任何 $x,y:A$, 都有恒等类型 $\id[A]{x}{y}$, 也可写作 $\idtype[A]{x}{y}$ 或者 $x=y$.
逻辑上可以把 $x=y$ 的元素作为 $x$ 和 $y$ 相等的证据, 或者看作 $x$ 与 $y$ 恒等. 此外, 不同于一阶逻辑, 类型论允许 $\id[A]{x}{y}$ 的元素可以作为个体, 构成其他命题.
因此, 可以\emph{迭代}恒等类型: 构造类型
$\id[{(\id[A]{x}{y})}]{p}{q}$, 即两个恒等 $p,q$ 之间的恒等, 以及类型 $\id[{(\id[{(\id[A]{x}{y})}]{p}{q})}]{r}{s}$, 等等.
这种恒等类型的层级结构恰好相当于连续路径和空间之间的 (高阶) 同伦, 或者$\infty$-广群.\index{.infinity-广群@$\infty$-广群}


因此, 通常把元素 $p : \id[A]{x}{y}$ 称为从 $x$ 到 $y$ 的 \define{路径};
\index{路径}%
$x$ 为它的\define{起点}%
\indexdef{路径的起点}%
\indexdef{路径!的起点}%
而 $y$ 是它的\define{终点}.
\indexdef{路径的终点}%
\indexdef{路径!的终点}%
相同起点和相同终点的路径 $p,q : \id[A]{x}{y}$ 被称为\define{平行},
\indexdef{平行路径}%
\indexdef{路径!平行}%
这种情况下元素 $r : \id[{(\id[A]{x}{y})}]{p}{q}$ 可以被视为同伦, 或者态射间的态射;
它经常被称为\define{2-维路径}%
\indexdef{path!2-维}%
\indexsee{2-维路径}{路径, 2-维}%
或\define{二维路径}.
\index{维!路径的}%
\indexsee{二维路径}{路径, 2-维}%
\indexsee{路径!二维的}{路径, 2-维}%
类似地, $\id[{(\id[{(\id[A]{x}{y})}]{p}{q})}]{r}{s}$ 是二维平行路径之间的\define{3-维路径}类型,
\indexdef{path!3-}\indexsee{3-path}{path, 3-}\indexsee{3-dimensional 路径}{path, 3-}\indexsee{路径!3-dimensional}{path, 3-}%
依此类推.
如果类型 $A$ ``类似于集合'', 比如 \nat, 那么对这些迭代的恒等类型不感兴趣 (参见 \cref{sec:basics-sets}), 不过在普通的情况下这可以构建非平凡同伦类型.

%% (Obviously, the
%% notation ``$\id[A]{x}{y}$'' has its limitations here.  The style
%% $\idtype[A]{x}{y}$ is only slightly better in iterations:
%% $\idtype[{\idtype[{\idtype[A]{x}{y}}]{p}{q}}]{r}{s}$.)

同伦类型论和经典同伦论有一个重要区别, 同伦类型论给定了空间的\emph{综合}%
\index{综合数学}%
\index{几何, 综合}%
\index{亚历山卓的欧基里得}%
描述, 意义如下.
综合几何是欧几里风格的一种集合~\cite{Euclid}: 它从基本概念(点和线), 构造 (任意两点连接一条线), 和公理 (所有直角相等) 出发, 按逻辑演绎出结论.
这与解析几何相反,
\index{分析数学}%
其中点和线的概念使用 $\R^n$ 的笛卡尔坐标系表示---线是点的集合---而基本构造和公理都由此推导.
经典的同伦论是分析的(空间和路径由点构成), 同伦类型论是综合的: 点, 路径, 和路径之间的路径是基础的, 不可分的, 原始概念.

此外, 同伦类型论令人惊奇的一个地方是, 所有的基础的构造和公理---所有的高阶广群结构---都自动地从恒等类型的归纳原理衍生出来.
回顾 \cref{sec:identity-types} 中说的, 如果
\begin{itemize}
    \item 每个 $x,y:A$ 和每个 $p:\id[A]xy$ 有一个类型 $D(x,y,p)$, 和
    \item 对于每个 $a:A$ 有一个元素 $d(a):D(a,a,\refl a)$,
\end{itemize}
那么
\begin{itemize}
    \item 存在一个元素 $\indid{A}(D,d,x,y,p):D(x,y,p)$ 对于\emph{每}两个元素 $x,y:A$ 和 $p:\id[A]xy$, 于是 $\indid{A}(D,d,a,a,\refl a) \jdeq d(a)$.
\end{itemize}
换句话说, 给定依值函数
\begin{align*}
    D &:\prd{x,y:A} (\id{x}{y}) \to \type\\
    d &:\prd{a:A} D(a,a,\refl{a})
\end{align*}
有依值函数
\[
    \indid{A}(D,d):\prd{x,y:A}{p:\id{x}{y}} D(x,y,p)
\]
对于每个 $a:A$ 满足
\begin{equation}
    \label{eq:Jconv}
    \indid{A}(D,d,a,a,\refl{a})\jdeq d(a).
\end{equation}
通常, 应用归纳规则时, 要么不在乎这个被定义的特殊函数, 要么立即给它取一个不同的名字.

非正式地, 恒等类型的归纳原理说明了, 对于恒等类型的居留元为 $p:\id[A]xy$, 为了构造一个依赖于它的对象(或证明一个陈述), 考虑特殊情况 $x$ 与 $y$ (判断上)相同而 $p$ (判断上)是自反元素 $\refl{x}:x=x$ , 只需在此情况下进行构造(或者证明)即可.
在非正式的情况下, 可以用短语 ``根据归纳, 可以假设\dots''.
这种``自反情况'' 的化简, 类似自然数的归纳证明中的, ``基础实例''和``归纳步骤'' 的约减, 以及不交并或析取的分类分析证明中, ``左实例'' 和 ``右实例'' 的化简.
\index{归纳原理!恒等类型的}%


自然数归纳证明的上下文中, ``转换规则''~\eqref{eq:Jconv}令人陌生, 但是在递归定义的相关概念中有类似的概念.
如果通过给定 $a_0$, 和用 $a_n$ 来指定 $a_{n+1}$ 来定义一个序列\index{序列} $(a_n)_{n\in \mathbb{N}}$, 那么序列的第 $0$ 项就\emph{是}给定的那个, 而序列中的 $a_{n+1}$ 和 $a_n$ 都满足给定的递归关系.
(这似乎很明显, 不值一提, 不过如果将递归的定义看作计算序列的值的算法\index{算法}, 这正是算法执行的过程.)
规则~\eqref{eq:Jconv} 类似于: 如果通过 $p:x=y$ 来定义一个对象, 那么当 $p$ 为 $\refl{x}:x=x$ 时, 就是它的值, 即 $f(\refl{x})$.

这个归纳原理赋予每个类型$\infty$-广群\index{.infinity-广群@$\infty$-广群}结构, 而两个类型之间的每个函数, 其结构都和两个广群间的 $\infty$-functor
\index{.infinity-functor@$\infty$-functor}%
匹配.
从数学的角度来看这很有趣, 因为给出了一个处理 $\infty$-广群的新方法.
从类型论的角度来看它很有趣, 因为它揭示了它揭示了与每种类型和函数相关的新运算.
本章的剩余部分, 从探讨这种结构开始.